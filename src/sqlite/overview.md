# 概要

Webアプリケーションでデータを保存するとき、どんな仕組みが使われているのでしょうか？このページでは、典型的なWebアプリケーションの構成と、フロントエンドエンジニア・バックエンドエンジニアそれぞれの守備範囲を整理します。

## Webアプリケーションの典型的な構成

現代のWebアプリケーションは、大きく3つの層に分かれています。

```
┌─────────────────────────────────────────────────────────────┐
│                      クライアント層                           │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  ブラウザ（React、Vue、Angularなど）                    │   │
│  │  - UIの描画                                           │   │
│  │  - ユーザー操作の受け付け                               │   │
│  │  - APIへのリクエスト送信                                │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓ HTTP (REST API)
┌─────────────────────────────────────────────────────────────┐
│                      サーバー層                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  APIサーバー（Hono、Express、Fastifyなど）              │   │
│  │  - リクエストの処理                                     │   │
│  │  - ビジネスロジックの実行                               │   │
│  │  - データベースへの読み書き                             │   │
│  │  - レスポンスの生成                                     │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓ SQL
┌─────────────────────────────────────────────────────────────┐
│                      データ層                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  データベース（SQLite、PostgreSQL、MySQLなど）          │   │
│  │  - データの永続化                                       │   │
│  │  - データの検索・集計                                   │   │
│  │  - データの整合性保証                                   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## フロントエンドとバックエンドの守備範囲

チーム開発では、フロントエンドエンジニアとバックエンドエンジニアで役割分担することが多いです。

### フロントエンドエンジニアの守備範囲

| 担当領域       | 具体的な作業                                   |
| -------------- | ---------------------------------------------- |
| UI/UX          | 画面のデザイン実装、ユーザー操作のハンドリング |
| 状態管理       | フォームの入力値、表示データの管理             |
| API連携        | fetch/axiosでのリクエスト送信、レスポンス処理  |
| バリデーション | 入力値の形式チェック（UX向上のため）           |

### バックエンドエンジニアの守備範囲

| 担当領域         | 具体的な作業                                      |
| ---------------- | ------------------------------------------------- |
| API設計・実装    | エンドポイントの設計、リクエスト/レスポンスの処理 |
| ビジネスロジック | 業務ルールの実装、計算処理                        |
| データベース     | テーブル設計、SQL作成、データの読み書き           |
| セキュリティ     | 認証・認可、入力値の検証、SQLインジェクション対策 |

### 境界線は曖昧になりつつある

ただし、最近はこの境界線が曖昧になってきています。

- **フルスタックフレームワーク**（Next.js、Remixなど）の登場で、フロントエンドエンジニアもサーバーサイドのコードを書く機会が増えた
- **BaaS**（Backend as a Service）の普及で、バックエンドの知識がなくてもデータベースを扱える
- **小規模チーム**では、一人で両方を担当することも多い

このハンズオンで学ぶSQLiteとSQLの知識は、どちらの立場でも役立ちます。

## データベースの種類

Webアプリケーションで使われるデータベースには、大きく2種類あります。

### リレーショナルデータベース（RDB）

データを**テーブル（表）** の形式で管理します。テーブル同士を関連付けて、複雑なデータ構造を表現できます。

| 名前       | 特徴                                       |
| ---------- | ------------------------------------------ |
| **SQLite** | ファイルベース、サーバー不要、組み込み向け |
| PostgreSQL | 高機能、大規模向け、クラウドサービスで人気 |
| MySQL      | Webアプリで広く使われている、高速          |

これらは全て **SQL**（Structured Query Language）という言語でデータを操作します。

### NoSQLデータベース

テーブル形式以外の方法でデータを管理します。

| 名前     | データ形式             | 特徴                    |
| -------- | ---------------------- | ----------------------- |
| MongoDB  | ドキュメント（JSON風） | 柔軟なスキーマ          |
| Redis    | キー・バリュー         | 超高速、キャッシュ向け  |
| DynamoDB | キー・バリュー         | AWSのマネージドサービス |

### このハンズオンでSQLiteを使う理由

1. **サーバー不要**: ファイル1つで動作するので、セットアップが簡単
2. **Node.js組み込み**: Node.js v22.5.0から標準で使える
3. **SQLの学習に最適**: 本格的なRDBと同じSQLが使える
4. **実用的**: 小〜中規模アプリなら本番でも十分使える

## データの流れを追ってみよう

ToDoアプリで「新しいタスクを追加する」操作を例に、データの流れを見てみましょう。

```
1. ユーザーがフォームに入力して送信ボタンをクリック
   ↓
2. フロントエンド（React）がPOSTリクエストを送信
   fetch('/api/todos', { method: 'POST', body: JSON.stringify({ title: '買い物' }) })
   ↓
3. サーバー（Hono）がリクエストを受け取り、データを検証
   app.post('/api/todos', async (c) => { ... })
   ↓
4. SQLを実行してデータベースに保存
   INSERT INTO todos (title, completed) VALUES ('買い物', false)
   ↓
5. サーバーがレスポンスを返す
   return c.json({ id: 1, title: '買い物', completed: false }, 201)
   ↓
6. フロントエンドがレスポンスを受け取り、UIを更新
```

このハンズオンでは、**3〜5の部分**（サーバー側でのデータベース操作）を実装していきます。

## ポイント

- **3層アーキテクチャ**: Webアプリはクライアント層・サーバー層・データ層の3つで構成される
- **フロントエンドの守備範囲**: UI、状態管理、API連携
- **バックエンドの守備範囲**: API実装、ビジネスロジック、データベース操作
- **RDB**: テーブル形式でデータを管理し、SQLで操作するデータベース
- **SQLite**: サーバー不要でファイルベースのRDB。学習・小規模アプリに最適
